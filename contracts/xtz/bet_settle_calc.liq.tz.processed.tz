parameter (pair (map nat nat) (pair (pair key_hash (pair (or unit (or string unit)) (pair (pair string (pair (pair timestamp timestamp) (pair (pair timestamp timestamp) (list string)))) (pair (pair (option key_hash) (pair tez (map nat nat))) (pair tez (pair (map nat tez) (pair (map nat (list (pair key_hash (pair nat tez)))) (pair (map key_hash nat) (map key_hash tez))))))))) (contract (or unit (or (pair key_hash (pair (or unit (or string unit)) (pair (pair string (pair (pair timestamp timestamp) (pair (pair timestamp timestamp) (list string)))) (pair (pair (option key_hash) (pair tez (map nat nat))) (pair tez (pair (map nat tez) (pair (map nat (list (pair key_hash (pair nat tez)))) (pair (map key_hash nat) (map key_hash tez))))))))) unit)) (pair key_hash (pair (or unit (or string unit)) (pair (pair string (pair (pair timestamp timestamp) (pair (pair timestamp timestamp) (list string)))) (pair (pair (option key_hash) (pair tez (map nat nat))) (pair tez (pair (map nat tez) (pair (map nat (list (pair key_hash (pair nat tez)))) (pair (map key_hash nat) (map key_hash tez)))))))))))); storage key_hash; return unit; code { DUP ; DIP { CDR ; } ; CAR ; DUUP ; SOURCE unit unit ; MANAGER ; COMPARE ; EQ ; IF { DUP ; CDAR ; PUSH (pair tez (pair tez (map key_hash tez))) (Pair "0" (Pair "0" (Map))) ; DUUP ; CDDDDDDAR ; PUSH (pair nat nat) (Pair 0 0) ; DUUUUUP ; CAR ; LAMBDA (pair (pair nat nat) (pair nat nat)) (pair nat nat) { DUP ; CAR ; CDR ; DUUP ; CDR ; CDR ; DUP ; DUUUP ; COMPARE ; GT ; IF { DUUP ; DUUUUP ; CAR ; CAR ; PAIR ; } { DUP ; DUUUUP ; CDR ; CAR ; PAIR ; } ; DIP { DROP ; DROP ; DROP ; } ; } ; REDUCE ; CAR ; GET ; IF_NONE { PUSH (list (pair key_hash (pair nat tez))) (List) ; } {} ; LAMBDA (pair (pair key_hash (pair nat tez)) (pair tez (pair tez (map key_hash tez)))) (pair tez (pair tez (map key_hash tez))) { DUP ; CAR ; CAR ; DUUP ; CAR ; CDDR ; DUUUP ; CDR ; CDDR ; PUSH nat 1000 ; DUUUUUP ; CAR ; CDAR ; DUUUUP ; MUL ; EDIV ; IF_NONE { PUSH (pair tez tez) (Pair "0" "0") ; } { DUUUP ; DUUP ; CAR ; COMPARE ; GT ; IF { PUSH nat 100 ; DUUUUP ; DUUUP ; CAR ; SUB ; EDIV ; IF_NONE { PUSH tez "0" ; } { CAR ; } ; } { PUSH tez "0" ; } ; DUP ; SWAP ; DUUUP ; DIIIP { DROP ; } ; CAR ; SUB ; PAIR ; } ; DUP ; CAR ; DUUUP ; DUUUUP ; DUUUUUUUP ; GET ; IF_NONE { PUSH tez "0" ; } {} ; DIIIIP { DROP ; DROP ; } ; DUUUP ; ADD ; SOME ; DUUUUUP ; DIIIIIP { DROP ; } ; UPDATE ; DUUUP ; DIIIP { DROP ; } ; CDR ; DUUUUP ; CDR ; CDAR ; ADD ; PAIR ; SWAP ; DUUUP ; DIIIP { DROP ; } ; CDR ; CAR ; ADD ; PAIR ; } ; REDUCE ; DUUP ; DUP ; CAR ; SWAP ; CDR ; DUP ; CAR ; SWAP ; CDR ; DUP ; CAR ; SWAP ; CDR ; DUP ; CAR ; SWAP ; CDR ; DUP ; CAR ; SWAP ; CDR ; DUP ; CAR ; SWAP ; CDR ; DUP ; CAR ; SWAP ; CDR ; DUP ; CAR ; SWAP ; DROP ; DUUUUUUUUUP ; CDDR ; SWAP ; PAIR ; SWAP ; PAIR ; SWAP ; PAIR ; SWAP ; PAIR ; SWAP ; PAIR ; SWAP ; PAIR ; SWAP ; PAIR ; SWAP ; PAIR ; DUP ; DUP ; CAR ; SWAP ; CDR ; DUP ; CAR ; SWAP ; CDR ; DUP ; CAR ; SWAP ; CDR ; DUP ; CAR ; SWAP ; CDR ; DUP ; CAR ; SWAP ; CDR ; DUP ; CAR ; SWAP ; CDR ; DUP ; CAR ; SWAP ; CDR ; DUP ; CAR ; SWAP ; DROP ; DUUUUUUUUUP ; CDDDDDDDDR ; DUUUUUUUUUUUP ; CDAR ; DUUUUUUUUUUUP ; CDDDDDDDDR ; DUUUUUUUUUUUUUUUUP ; GET ; IF_NONE { PUSH tez "0" ; } {} ; DIIIIIIIIIIIP { DROP ; } ; DIIIIIIIIIIIIP { DROP ; } ; ADD ; SOME ; DUUUUUUUUUUUUUP ; UPDATE ; SWAP ; PAIR ; SWAP ; PAIR ; SWAP ; PAIR ; SWAP ; PAIR ; SWAP ; PAIR ; SWAP ; PAIR ; SWAP ; PAIR ; SWAP ; PAIR ; DUUUUP ; DIIIIP { DROP ; } ; PUSH (contract (pair tez (pair (pair key_hash (pair (or unit (or string unit)) (pair (pair string (pair (pair timestamp timestamp) (pair (pair timestamp timestamp) (list string)))) (pair (pair (option key_hash) (pair tez (map nat nat))) (pair tez (pair (map nat tez) (pair (map nat (list (pair key_hash (pair nat tez)))) (pair (map key_hash nat) (map key_hash tez))))))))) (contract (or unit (or (pair key_hash (pair (or unit (or string unit)) (pair (pair string (pair (pair timestamp timestamp) (pair (pair timestamp timestamp) (list string)))) (pair (pair (option key_hash) (pair tez (map nat nat))) (pair tez (pair (map nat tez) (pair (map nat (list (pair key_hash (pair nat tez)))) (pair (map key_hash nat) (map key_hash tez))))))))) unit)) (pair key_hash (pair (or unit (or string unit)) (pair (pair string (pair (pair timestamp timestamp) (pair (pair timestamp timestamp) (list string)))) (pair (pair (option key_hash) (pair tez (map nat nat))) (pair tez (pair (map nat tez) (pair (map nat (list (pair key_hash (pair nat tez)))) (pair (map key_hash nat) (map key_hash tez)))))))))))) unit ) "TZ1Zh6Wz1x4VzUx8KFtojrnpbmh7xKGL9WLD"; PUSH tez "0" ; DUUUUUUP ; DIIIIIIP { DROP ; } ; CDDR ; DUUUUUP ; PAIR ; DUUUUUUP ; CDAR ; DUUUUUUUP ; DIIIIIIIP { DROP ; } ; CAR ; DUUUUUUUP ; DIIIIIIIP { DROP ; } ; CDDDDAR ; SUB ; SUB ; PAIR ; TRANSFER_TOKENS ; SWAP ; SWAP ; PAIR ; } { FAIL ; } ; } 