parameter (pair tez (pair (pair key_hash (pair (or unit (or string unit)) (pair (pair string (pair (pair timestamp timestamp) (pair (pair timestamp timestamp) (list string)))) (pair (pair (option key_hash) (pair tez (map nat nat))) (pair tez (pair (map nat tez) (pair (map nat (list (pair key_hash (pair nat tez)))) (pair (map key_hash nat) (map key_hash tez))))))))) (contract (or unit (or (pair key_hash (pair (or unit (or string unit)) (pair (pair string (pair (pair timestamp timestamp) (pair (pair timestamp timestamp) (list string)))) (pair (pair (option key_hash) (pair tez (map nat nat))) (pair tez (pair (map nat tez) (pair (map nat (list (pair key_hash (pair nat tez)))) (pair (map key_hash nat) (map key_hash tez))))))))) unit)) (pair key_hash (pair (or unit (or string unit)) (pair (pair string (pair (pair timestamp timestamp) (pair (pair timestamp timestamp) (list string)))) (pair (pair (option key_hash) (pair tez (map nat nat))) (pair tez (pair (map nat tez) (pair (map nat (list (pair key_hash (pair nat tez)))) (pair (map key_hash nat) (map key_hash tez)))))))))))); storage key_hash; return unit; code { DUP ; DIP { CDR ; } ; CAR ; DUUP ; SOURCE unit unit ; MANAGER ; COMPARE ; EQ ; IF { DUP ; CDAR ; DUUP ; CAR ; DUUP ; CDDDAR ; CAR ; IF_NONE { DROP ; DUUUP ; DIIIP { DROP ; } ; DUUUP ; DIIIP { DROP ; } ; CDDR ; PUSH tez "0" ; DUUUUP ; DIIIIP { DROP ; } ; DUP ; CAR ; SWAP ; CDR ; CDR ; PUSH (or unit (or string unit)) (Right (Left "no bookmaker's key found")) ; PAIR ; SWAP ; PAIR ; LEFT unit ; RIGHT unit ; TRANSFER_TOKENS ; FAIL ; } { DUUUP ; CDDDAR ; CDAR ; DUP ; DUUUUP ; COMPARE ; GT ; IF { PUSH nat 100 ; DUUP ; DUUUUUP ; SUB ; EDIV ; IF_NONE { PUSH tez "0" ; } { CAR ; } ; } { PUSH tez "0" ; } ; DUUUUUP ; DUP ; CAR ; SWAP ; CDR ; DUP ; CAR ; SWAP ; CDR ; DUP ; CAR ; SWAP ; CDR ; DUP ; CAR ; SWAP ; CDR ; DUP ; CAR ; SWAP ; CDR ; DUP ; CAR ; SWAP ; CDR ; DUP ; CAR ; SWAP ; CDR ; DUP ; CAR ; SWAP ; DROP ; DUUUUUUUUUUUUUP ; CDDDDDDDDR ; DUUUUUUUUUUP ; DUUUUUUUUUUUUUUUP ; CDDDDDDDDR ; DUUUUUUUUUUUUUUUUUUP ; GET ; IF_NONE { PUSH tez "0" ; } {} ; ADD ; SOME ; DUUUUUUUUUUUUUUUUUP ; UPDATE ; SWAP ; PAIR ; SWAP ; PAIR ; SWAP ; PAIR ; SWAP ; PAIR ; SWAP ; PAIR ; SWAP ; PAIR ; SWAP ; PAIR ; SWAP ; PAIR ; DUUUUUUUUP ; DUUUUUUUUP ; CDDR ; PUSH tez "0" ; DUUUUP ; DUP ; CAR ; SWAP ; CDR ; DUP ; CAR ; SWAP ; CDR ; DUP ; CAR ; SWAP ; CDR ; DUP ; CAR ; SWAP ; CDR ; DUP ; CAR ; SWAP ; CDR ; DUP ; CAR ; SWAP ; CDR ; DUP ; CAR ; SWAP ; CDR ; DUP ; CAR ; SWAP ; DROP ; DUUUUUUUUUUUUP ; CDDDDDDDDR ; DUUUUUUUUUUUUUUUUUUP ; CDDDDDDDDR ; DUUUUUUUUUUUUUUUUUP ; GET ; IF_NONE { PUSH tez "0" ; } {} ; DIIIIIIIIIIIIIP { DROP ; } ; DIIIIIIIIIIIIIIP { DROP ; } ; DUUUUUUUUUUUUUUP ; DIIIIIIIIIIIIIIP { DROP ; } ; DIIIIIIIIIIIIIIIIP { DROP ; DROP ; DROP ; } ; DUUUUUUUUUUUUUUUUP ; DIIIIIIIIIIIIIIIIP { DROP ; } ; SUB ; ADD ; SOME ; DUUUUUUUUUUUUUUP ; DIIIIIIIIIIIIIIP { DROP ; } ; UPDATE ; SWAP ; PAIR ; SWAP ; PAIR ; SWAP ; PAIR ; SWAP ; PAIR ; SWAP ; PAIR ; SWAP ; PAIR ; SWAP ; PAIR ; SWAP ; PAIR ; DUP ; CAR ; SWAP ; CDR ; CDR ; PUSH (or unit (or string unit)) (Right (Right Unit)) ; PAIR ; SWAP ; PAIR ; LEFT unit ; RIGHT unit ; TRANSFER_TOKENS ; DROP ; PUSH unit Unit ; PAIR ; } ; } { FAIL ; } ; } 